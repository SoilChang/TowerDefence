<!DOCTYPE html>
<html>
<head>
	<title>EaselJS demo: Ticker.setPaused()</title>
	<link href="demo.css" rel="stylesheet" type="text/css">
	<script src="http://code.createjs.com/easeljs-0.7.0.min.js"></script>
	<script>
		
		var stage, Circle1, Circle2, output, cash, tower1;

		function init() {
			stage = new createjs.Stage("demoCanvas");
			
			cash=100

			Circle1 = new createjs.Shape();
			Circle1.graphics.beginFill("red").drawCircle(0, 0, 10);
			Circle1.x = 50;
			Circle1.y = -20;
			Circle1.hp = 5;
			stage.addChild(Circle1);

			Circle2 = new createjs.Shape();
			Circle2.graphics.beginFill("red").drawCircle(0, 0, 10);
			Circle2.x = 50;
			Circle2.y = -20;
			Circle2.hp = 5;
			stage.addChild(Circle2)

			//tower
			tower1 = new createjs.Shape();
			tower1.graphics.beginFill("green").drawCircle(0,0,10);
			tower1.x = 150;
			tower1.y = stage.canvas.height - 20;
			tower1.dmg = 5;
			tower1.range = 25;
			tower1.attack = function (obj) {
				obj.hp-=this.dmg;
			}
			stage.addChild(tower1)

			//drag tower
			tower1.on('pressmove', function(evt) {
				evt.currentTarget.x = evt.stageX;
				evt.currentTarget.y = evt.stageY;
				stage.update();
			});


			// and register our main listener
			createjs.Ticker.on("tick", tick);
			createjs.Ticker.setPaused(true);
			createjs.Ticker.setFPS(50);

			// UI code:
			output = stage.addChild(new createjs.Text("", "14px monospace", "#000"));
			output.lineHeight = 15;
			output.textBaseline = "top";
			output.x = 10;
			output.y = stage.canvas.height-output.lineHeight*3-10;
		}
		
		function isdead(obj) {
			if (obj.hp <= 0) {
				stage.removeChild(obj);
			}
		};

		function tick(event) {
            if (!createjs.Ticker.getPaused()) {
            	var c1x=c1y=c2x=c2y=0
            	if (Circle1.y<50 && Circle1.x===50) {
            		c1y=5;
            	};
            	if (Circle1.y>=50 && Circle1.x<=450) {
            		c1x=5;
            		c1y=0;
            	};
            	if (Circle1.x>450) {
            		c1y=5;
            		c1x=0;
            	};
            	if (Circle1.y>150) {
            		c1y=0;
            		c1x=-5;
            	};

            	//circle2
            	if (Circle1.y>45 ) {
            		c2y=5;
            	};
            	if (Circle2.y>=50 && Circle2.x<=450) {
            		c2x=5;
            		c2y=0;
            	};
            	if (Circle2.x>450) {
            		c2y=5;
            		c2x=0;
            	};
            	if (Circle2.y>150) {
            		c2y=0;
            		c2x=-5;
            	}        

				Circle1.x+=c1x
				Circle1.y+=c1y

				Circle2.x+=c2x
				Circle2.y+=c2y

				//tower atacks
				if (
					(tower1.x + tower1.range) >= (Circle1.x)
					&& (tower1.x - tower1.range) <= (Circle1.x)
					&& (tower1.y + tower1.range) >= (Circle1.y)
					&& (tower1.y - tower1.range) <= (Circle1.y)
				) {
					tower1.attack(Circle1);
					isdead(Circle1);
				};

            };
			

			output.text = "Paused = "+createjs.Ticker.getPaused()+"\n"+
				"Time = "+ Math.round(createjs.Ticker.getTime(true))+"\n"+
				"Cash = "+cash
			
			stage.update(event); // important!!
		}
		
		function togglePause() {
			var paused = !createjs.Ticker.getPaused();
			createjs.Ticker.setPaused(paused);
			document.getElementById("pauseBtn").value = paused ? "play" : "pause";
		}
	</script>
</head>
<body onload="init();">
	<canvas id="demoCanvas" width="500" height="200">
		alternate content
	</canvas><br>
	<input type="button" value="start" id="pauseBtn" onclick="togglePause();">
</body>
</html>
